 - name: Collect only facts returned by facter
   hosts: all
   gather_facts: false  
  
   tasks:
     
     - name: Set static IP address
       win_shell: "(new-netipaddress -InterfaceAlias Ethernet -IPAddress {{ dc_address }} -prefixlength {{dc_netmask_cidr}} -defaultgateway {{ dc_gateway }})"

     - name: Set Password
       win_user:
       name: administrator
       password: "{{dc_password}}"
       state: present
       delegate_to: '{{ dc_address }}'
       ignore_errors: True  
